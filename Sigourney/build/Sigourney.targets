<!--
Copyright (c) 2020 Theodore Tsirpanis

This software is released under the MIT License.
https://opensource.org/licenses/MIT
-->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
  TreatAsLocalProperty="_SigourneyEnable">
  <Import Project="$(MSBuildThisFileDirectory)Sigourney.PublishMode.Targets" />
  <PropertyGroup>
    <IntermediateDirectory>$(ProjectDir)$(IntermediateOutputPath)</IntermediateDirectory>
    <_SigourneyEnable Condition="$(SigourneyEnable) == false OR $(DesigntimeBuild) == true">false</_SigourneyEnable>
  </PropertyGroup>
  <ItemGroup>
    <SigourneyConfiguration Include="Sigourney default configuration">
      <SignAssembly>$(SignAssembly)</SignAssembly>
      <IntermediateDirectory>$(IntermediateDirectory)</IntermediateDirectory>
      <KeyOriginatorFile>$(KeyOriginatorFile)</KeyOriginatorFile>
      <AssemblyOriginatorKeyFile>$(AssemblyOriginatorKeyFile)</AssemblyOriginatorKeyFile>
    </SigourneyConfiguration>
  </ItemGroup>

  <UsingTask Condition="$(_SigourneyEnable) != false" TaskName="GetNextSentinel" AssemblyFile="$(SigourneyAssembly)" />
  <Import
    Condition="$(_SigourneyEnable) != false AND '$(SigourneyRegisteredTargetFiles)' != ''"
    Project="$(SigourneyRegisteredTargetFiles)" />

  <Target
    Name="SigourneyEntryPoint"
    Condition="$(_SigourneyEnable) != false AND '$(SigourneyRegisteredTargets)' != ''"
    AfterTargets="AfterCompile"
    DependsOnTargets="$(SigourneyRegisteredTargets)">
  </Target>
</Project>
